<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="scriptCSS.css">
    <title>Airplanes Battle Game Development</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">
    class StartScene extends Phaser.Scene{
        spacebar = undefined;
        constructor() {
            super({ key: 'startScene' });
        }

        preload ()
        {
            this.load.image('sky', 'images/sky.png');
            this.load.image('boeing', 'images/boeing.png');
            this.load.image('cloud', 'images/cloud.png');
            this.load.image('sky', 'images/airplane.webp');
            this.load.image('runway', 'images/runway.png');
        }
        create ()
        {
            this.add.image(0,0,'sky').setOrigin(0).setName('sky');
            var platforms = this.physics.add.staticGroup();

            var runway = this.add.image(0, 700, 'runway').setOrigin(0);
            runway.displayWidth = game.config.width;
            runway.displayHeight = 50;

            platforms.create(400, 600, 'cloud').setScale(0.3).refreshBody();
            platforms.create(250, 600, 'cloud').setScale(0.3).refreshBody();//stanga jos
            platforms.create(100, 600, 'cloud').setScale(0.3).refreshBody();

            platforms.create(300, 150, 'cloud').setScale(0.3).refreshBody();
            platforms.create(150, 150, 'cloud').setScale(0.3).refreshBody();//stanga sus
            platforms.create(450, 150, 'cloud').setScale(0.3).refreshBody();

            platforms.create(1400, 200, 'cloud').setScale(0.3).refreshBody();
            platforms.create(1100, 200, 'cloud').setScale(0.3).refreshBody();//dreapta sus
            platforms.create(1250, 200, 'cloud').setScale(0.3).refreshBody();

            platforms.create(1150, 600, 'cloud').setScale(0.3).refreshBody();
            platforms.create(1450, 600, 'cloud').setScale(0.3).refreshBody();//dreapta jos
            platforms.create(1300, 600, 'cloud').setScale(0.3).refreshBody();

            platforms.create(850, 390, 'cloud').setScale(0.3).refreshBody();
            platforms.create(550, 390, 'cloud').setScale(0.3).refreshBody();//centru
            platforms.create(700, 390, 'cloud').setScale(0.3).refreshBody();

            this.spacebar = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE);
        }

        update ()
        {
            if (Phaser.Input.Keyboard.JustDown(this.spacebar)) {
                this.scene.stop('startScene');
                this.scene.start('gameScene');
            }
        }
    }

    var airplane1 = 0;
    var airplane2 = 0;

    class GameScene extends Phaser.Scene{
        cursors = undefined;
        airplane1 = undefined;
        airplane1ScoreText = undefined;
        airplane2 = undefined;
        airplane2ScoreText = undefined;
        platforms = undefined;
        gas = undefined;
        keyA = undefined;
        keyS = undefined;
        keyD = undefined;
        keyW = undefined;
        constructor() {
            super({ key: 'gameScene' });
        }

        preload() {
            this.load.image('sky', 'images/sky.png');
            this.load.image('boeing', 'images/boeing.png');
            this.load.image('airplane', 'images/airplane.webp');
            this.load.image('cloud', 'images/cloud.png');
            this.load.image('sky', 'images/airplane.webp');
            this.load.image('gas', 'images/gas.png');
            this.load.image('runway', 'images/runway.png');
        }

        create() {
            this.cursors = this.input.keyboard.createCursorKeys();
            this.keyA = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A);
            this.keyD = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D);
            this.keyW = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.W);
            this.keyS = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S);

            this.add.image(0,0,'sky').setOrigin(0).setName('sky');
            var platforms = this.physics.add.staticGroup();

            var runway = this.add.image(0, 700, 'runway').setOrigin(0);
            runway.displayWidth = game.config.width;
            runway.displayHeight = 50;

            platforms.create(400, 600, 'cloud').setScale(0.3).refreshBody();
            platforms.create(250, 600, 'cloud').setScale(0.3).refreshBody();//stanga jos
            platforms.create(100, 600, 'cloud').setScale(0.3).refreshBody();

            platforms.create(300, 150, 'cloud').setScale(0.3).refreshBody();
            platforms.create(150, 150, 'cloud').setScale(0.3).refreshBody();//stanga sus
            platforms.create(450, 150, 'cloud').setScale(0.3).refreshBody();

            platforms.create(1400, 200, 'cloud').setScale(0.3).refreshBody();
            platforms.create(1100, 200, 'cloud').setScale(0.3).refreshBody();//dreapta sus
            platforms.create(1250, 200, 'cloud').setScale(0.3).refreshBody();

            platforms.create(1150, 600, 'cloud').setScale(0.3).refreshBody();
            platforms.create(1450, 600, 'cloud').setScale(0.3).refreshBody();//dreapta jos
            platforms.create(1300, 600, 'cloud').setScale(0.3).refreshBody();

            platforms.create(850, 390, 'cloud').setScale(0.3).refreshBody();
            platforms.create(550, 390, 'cloud').setScale(0.3).refreshBody();//centru
            platforms.create(700, 390, 'cloud').setScale(0.3).refreshBody();

            this.airplane1ScoreText = this.add.text(16, 16, '', {
                fontSize: '16px',
                fill: '#fff' });

            this.airplane2ScoreText = this.add.text(800, 16, '', {
                fontSize: '16px',
                fill: '#fff' });

            // Add the player sprite
            this.airplane2 = this.physics.add.sprite(1300, 550.5, 'boeing');
            // Making our sprite bigger
            this.airplane2.setScale(0.20);
            // Our sprite cannot leave the 800x600 display
            this.airplane2.setCollideWorldBounds(true);
            // Add score text for player 2
            this.airplane2ScoreText = this.add.text(1600, 16, 'Boeing:' + airplane2, {
                fontSize: '16px',
                fill: '#fff' });

            // Add the player sprite
            this.airplane1 = this.physics.add.sprite(100, 550.5, 'airplane');
            // Making our sprite bigger
            this.airplane1.setScale(0.40);
            // Our sprite cannot leave the 800x600 display
            this.airplane1.setCollideWorldBounds(true);
            // Add score text for player 1
            this.airplane1ScoreText = this.add.text(16, 16, 'Airbus:' + airplane1, {
                fontSize: '16px',
                fill: '#fff' });

            this.physics.add.collider(this.airplane1, this.platforms);
            this.physics.add.collider(this.airplane2, this.platforms);

            this.gas = this.physics.add.staticGroup();

        }


    }

    const config = {
        type: Phaser.AUTO,
        width: 1750,
        height: 740,
        physics:{
            default:'arcade',
            arcade:{
                gravity:{y:300 },
                debug:false
            }
        },
        input: {
            keyboard: true
        },
        scene: [
            StartScene,
            GameScene
        ]
    };

    const game = new Phaser.Game(config);


</script>

</body>
</html>